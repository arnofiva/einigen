import{kM as p,h as e,b as a,e as r,y as o,eV as s,a as m}from"./index.da161cf1.js";import{O as n}from"./I3SMeshView3D.a9aee39d.js";import{n as l}from"./LayerView3D.a0f4cfd4.js";import{d}from"./LayerView.948860d4.js";import"./I3SOverrides.43bac39f.js";import"./I3SNode.8380a4f6.js";import"./I3SUtil.1e24f8d3.js";import"./Query.e586665e.js";import"./I3SBinaryReader.f09861ac.js";import"./meshFeatureSet.54057ed0.js";import"./MeshGeoreferencedRelativeVertexSpace.a44e5587.js";import"./MeshLocalVertexSpace.33b046fb.js";import"./georeference.20930ae2.js";import"./External.3b5c14d5.js";import"./FeatureSet.97dc0f24.js";import"./FeatureLayerView3D.69570ebc.js";import"./FeatureLayerViewBase3D.d9ff8f8b.js";import"./FeatureLikeLayerView3D.2804d5c7.js";import"./dehydratedFeatureComparison.d41240fc.js";import"./queryForSymbologySnapping.b7a5beb4.js";import"./elevationInfoUtils.d710f6c5.js";import"./hash.25af2a28.js";import"./diffUtils.f0876598.js";import"./UniqueValueRenderer.0143139a.js";import"./ColorStop.f762bde8.js";import"./colorRamps.80cb140e.js";import"./Graphics3DObjectStates.1983c1d0.js";import"./jsonUtils.4745b876.js";import"./DictionaryLoader.90c8c47c.js";import"./FieldsIndex.09813895.js";import"./heatmapUtils.32e9a30b.js";import"./defaults.83793da7.js";import"./defaultsJSON.a416f32c.js";import"./optimizedFeatureQueryEngineAdapter.b17e3ee2.js";import"./centroid.66ea1f85.js";import"./PooledRBush.b9188fbe.js";import"./quickselect.b8e0afc3.js";import"./popupUtils.5174221c.js";import"./FeatureFilter.97dd33dd.js";import"./floorFilterUtils.2fa4f3da.js";import"./QueryEngine.f42b4b13.js";import"./normalizeUtils.54c24a4d.js";import"./normalizeUtilsCommon.87227ae2.js";import"./WhereClause.c0b1e923.js";import"./executionError.10e29c03.js";import"./json.7bed7e43.js";import"./QueryEngineCapabilities.a6a6a20b.js";import"./utils.8873e24e.js";import"./generateRendererUtils.e8dfecdf.js";import"./FeatureStore.e774d369.js";import"./BoundsStore.13c0920f.js";import"./projectExtentUtils.4a1e869d.js";import"./query.22cd43bf.js";import"./pbfQueryUtils.c4418ce7.js";import"./pbf.82c57b62.js";import"./queryZScale.2643e684.js";import"./EventedSet.2b4d6c27.js";import"./FeatureEffect.ee83c7e0.js";import"./jsonUtils.1c231e28.js";import"./RefreshableLayerView.93fee593.js";import"./SceneModification.98a0e780.js";import"./persistable.2f8a3a21.js";import"./resourceExtension.748c0ef1.js";import"./SceneLayerWorker.c8cc9b18.js";const h=.2;let t=class extends n(l(d)){constructor(){super(...arguments),this.type="integrated-mesh-3d",this._elevationContext="im",this._isIntegratedMesh=!0,this._supportsLabeling=!1,this.drapeTargetType=p.WithoutRasterImage}get i3slayer(){return this.layer}get updatingProgressValue(){return this._controller?.updatingProgress??0}get lodFactor(){return this.view?.qualitySettings?.sceneService?.integratedMesh?.lodFactor??1}get progressiveLoadFactor(){return this.lodFactor>=1?h:1}get layerPopupEnabledAndHasTemplate(){return!1}initialize(){this.updatingHandles.add(()=>this.layer.modifications,()=>this._loadModifications(),e),this.view.basemapTerrain.overlayManager.registerDrapeTarget(this)}destroy(){this.view.basemapTerrain.overlayManager.unregisterDrapeTarget(this)}_createLayerGraphic(){const i=new a;return i.layer=this.layer,i.sourceLayer=this.layer,i}canResume(){return super.canResume()&&(!this._controller||this._controller.rootNodeVisible)}_loadModifications(){if(this.handles.remove("modifications"),this.layer.modifications==null)return void(this._modifications=[]);const i=this.layer.modifications;this.handles.add(this.updatingHandles.addOnCollectionChange(()=>i,()=>this._modifications=i.toArray(),e),"modifications")}};r([o()],t.prototype,"layer",void 0),r([o()],t.prototype,"i3slayer",null),r([o(s)],t.prototype,"updatingProgress",void 0),r([o()],t.prototype,"updatingProgressValue",null),r([o()],t.prototype,"lodFactor",null),r([o({readOnly:!0})],t.prototype,"progressiveLoadFactor",null),t=r([m("esri.views.3d.layers.SceneLayerView3D")],t);const wt=t;export{wt as default};
